<div class="modal fade" id="DSMExportModal" tabindex="-1" role="dialog" aria-labelledby="DSMExportModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="DSMExportModalLabel">Welcome to DSM Exporter</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="dsm_export_instructions">
            <ol>
              <li>Draw, create an outline around the area of interest</li>
              <li>Export, click "Export DSM Data"</li>
              <li>Download, click on the download link when the export is done</li>
            </ol>
        </div>
        <div>
          <ul>
            <li>area limit: {{area_limit}}</li>
            <li>resolution: {{resolution}}</li>
          </ul>
        </div>
        <div id="dsm_download_section" class="d-none">
            <h1 id="dsm_export_status">status:</h1>
            <div class="alert alert-danger d-none" role="alert" id="dsm_export_error">
                Error Occured
            </div>
            <a id="dsm_download_link">
                <button type="button" disabled class="btn isptoolbox-btn btn-secondary" id="dsm_download_btn">
                    Download DSM
                </button>
            </a>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn isptoolbox-btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="DSMUpload" tabindex="-1" role="dialog" aria-labelledby="DSMUploadLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="DSMUploadLabel">Upload a KMZ or GeoJSON File</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Select a geojson (GeometryCollection) or kml file with a polygon in it.</p>
      <form enctype="multipart/form-data"  action="/pro/workspace/api/dsm-export/" method="POST"
        id="dsm_upload_form"
      >
        {{ upload_form }}
        <input type="submit" class="btn isptoolbox-btn btn-primary" value="Upload">
      </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn isptoolbox-btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="fixed-top">
  <div class=" d-flex flex-row justify-content-between">
    <div id="geocoder" class="pt-2 pl-2"></div>
    <div class="d-flex flex-row">
      <button type="button" class="btn isptoolbox-btn btn-primary mt-2 mr-2"
        id="draw-polygon-button"
      >
        Draw Polygon
      </button>
      <button type="button" class="btn isptoolbox-btn btn-primary mt-2 mr-2"
        data-toggle="modal" data-target="#DSMUpload" id="dsm-upload-aoi-modal-btn"
      >
        Upload KML / GeoJSON
      </button>
      <button type="button" class="btn isptoolbox-btn btn-primary mt-2 mr-2"
        data-toggle="modal" data-target="#DSMExportModal" id="export-dsm-btn"
      >
        Export DSM Data
      </button>
    </div>
  </div>
</div>
